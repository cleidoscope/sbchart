(function(u,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(u=typeof globalThis<"u"?globalThis:u||self,t(u.VueSBChart={},u.Vue))})(this,function(u,t){"use strict";const z=["src"],O={key:2,class:"simple-baseline-series"},R={class:"serie-value"},j=t.defineComponent({__name:"VueSBChart",props:{series:{type:Array,default(){return[]}},baseValue:{type:Number,default:0},options:{type:Object,default(){return{upColor:"#008000",downColor:"#ff0000",lineWidth:1}}},interactive:{type:Boolean,default:!0},gridLines:{type:Boolean,default:!0}},setup(C){const i=C,y=e=>{var l=e.toString(16);return l.length==1?"0"+l:l},k=e=>"#"+y(e.r)+y(e.g)+y(e.b),V=e=>{const l=new Date(e*1e3);return`${l.getDate()}/${l.getMonth()}/${l.getFullYear()} ${l.getHours()}:${l.getMinutes()}`},B=t.computed(()=>i.series.sort((l,o)=>l.timestamp-o.timestamp)),L=e=>{let l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return l?{r:parseInt(l[1],16),g:parseInt(l[2],16),b:parseInt(l[3],16)}:null},s=L(i.options.upColor)||{r:0,g:128,b:0},d=L(i.options.downColor)||{r:255,g:0,b:0},F=i.options.lineWidth||1,M=t.ref(),D=t.ref([]),b=t.ref(0),E=t.ref(),G=()=>{if(B.value.length==0)return;let e=document.createElement("canvas"),l=M.value;e.width=l.offsetWidth*2,e.height=l.offsetHeight*2;let o=e.getContext("2d");o.lineWidth=1;let _=i.baseValue,n=B.value.map(N=>N.value),p=1,f=n.length,m=p/f;b.value=e.width/(f-1)-m;let h=e.height-p,g=Math.max.apply(Math,n),$=Math.min.apply(Math,n),T=(_-$)/(g-$),c=(h-p)*T;c<0&&(c=0);let a=document.createElement("canvas");a.width=e.width,a.height=e.height;let r=a.getContext("2d");I(o,B.value,g,$,h,p,b.value,c,e,"down"),r==null||r.drawImage(e,0,0),o==null||o.clearRect(0,0,e.width,e.height),o==null||o.beginPath(),c>h?e.height=1:e.height=h-c,e.height<=0&&(e.height=1),I(o,B.value,g,$,h,p,b.value,c,e,"up",!0),r==null||r.drawImage(e,0,0);const S=a.toDataURL("image/png");E.value=S},I=(e,l,o,_,n,p,f,m,h,g,$=!1)=>{e.beginPath();let T=0,c=`rgb(${s.r}, ${s.g}, ${s.b})`;g=="down"&&(c=`rgb(${d.r}, ${d.g}, ${d.b})`),l.forEach((r,S)=>{let N=(r.value-_)/(o-_),U=(n-p)*N,w=0,W=n-U;S==0?w=p:w=f*S,e.lineTo(w,W),S>-1&&$&&i.interactive&&D.value.push({y:W/2-5,x:w/2,serie:r})}),e.strokeStyle=c,e.lineWidth=F,e.stroke();let a;if(g=="up"){a=e.createLinearGradient(0,0,0,n);let r=(n-m)/n;r>1?r=1:r<0&&(r=0),a.addColorStop(0,`rgba(${s.r}, ${s.g}, ${s.b}, 0.5)`),a.addColorStop(r,`rgba(${s.r}, ${s.g}, ${s.b}, 0)`),e.lineTo(f*(l.length-1),n-m),e.lineTo(f*(T-l.length),n-m)}else{let r=m/n;r>1?r=1:r<0&&(r=0),a=e.createLinearGradient(0,n,0,0),a.addColorStop(0,`rgba(${d.r}, ${d.g}, ${d.b}, 0.5)`),a.addColorStop(r,`rgba(${d.r}, ${d.g}, ${d.b}, 0)`),e.lineTo(h.width-p,f),e.lineTo(p,f)}g=="down"&&(e.fillStyle="transparent",e.fillRect(0,0,h.width,n-m)),a&&(e.fillStyle=a),e.globalCompositeOperation="destination-over",e.fill(),e.globalCompositeOperation="source-over"};return t.onMounted(()=>{G()}),(e,l)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"simpleBaselineChart",ref:M,class:"simple-baseline-chart"},[i.gridLines?(t.openBlock(),t.createElementBlock("div",{key:0,class:"simple-baseline-grid",style:t.normalizeStyle({backgroundSize:`${b.value/2}px ${b.value/2}px`})},null,4)):t.createCommentVNode("",!0),E.value?(t.openBlock(),t.createElementBlock("img",{key:1,src:E.value},null,8,z)):t.createCommentVNode("",!0),i.interactive?(t.openBlock(),t.createElementBlock("div",O,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(D.value,(o,_)=>(t.openBlock(),t.createElementBlock("div",{key:_,class:"simple-baseline-serie",style:t.normalizeStyle({width:`${b.value/2}px`,left:`${o.x}px`})},[t.createElementVNode("div",{class:"serie-wrapper",style:t.normalizeStyle({top:`${o.y}px`})},[t.createElementVNode("div",null,[t.createElementVNode("div",null,t.toDisplayString(V(o.serie.timestamp)),1),t.createElementVNode("div",R,t.toDisplayString(o.serie.value),1)]),t.createElementVNode("span",{style:t.normalizeStyle({backgroundColor:`${o.serie.value>i.baseValue?k(t.unref(s)):k(t.unref(d))}`})},null,4)],4)],4))),128))])):t.createCommentVNode("",!0)],512))}}),q="",v=((C,i)=>{const y=C.__vccOpts||C;for(const[k,V]of i)y[k]=V;return y})(j,[["__scopeId","data-v-6c9e2924"]]);u.VueSBChart=v,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
