(function(g,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(g=typeof globalThis<"u"?globalThis:g||self,t(g.VueSBChart={},g.Vue))})(this,function(g,t){"use strict";const D=u=>(t.pushScopeId("data-v-94ca05f0"),u=u(),t.popScopeId(),u),O=["src"],j={key:2,class:"simple-baseline-series"},v={class:"simple-baseline-serie-value"},R=D(()=>t.createElementVNode("span",{class:"arrow-down"},null,-1)),F=t.defineComponent({__name:"VueSBChart",props:{series:{type:Array,default(){return[]}},baseValue:{type:Number,default:0},options:{type:Object,default(){return{upColor:"#008000",downColor:"#ff0000",lineWidth:1}}},interactive:{type:Boolean,default:!0},gridLines:{type:Boolean,default:!0}},setup(u){const s=u,S=e=>{var l=e.toString(16);return l.length==1?"0"+l:l},k=e=>"#"+S(e.r)+S(e.g)+S(e.b),T=e=>{const l=new Date(e*1e3);return`${l.getDate()}/${l.getMonth()}/${l.getFullYear()} ${l.getHours()}:${l.getMinutes()}`},w=t.computed(()=>s.series.sort((l,o)=>l.timestamp-o.timestamp)),M=e=>{let l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return l?{r:parseInt(l[1],16),g:parseInt(l[2],16),b:parseInt(l[3],16)}:null},p=M(s.options.upColor)||{r:0,g:128,b:0},c=M(s.options.downColor)||{r:255,g:0,b:0},U=s.options.lineWidth||1,B=t.ref(),V=t.ref([]),N=t.ref(0),I=t.ref(),$=t.computed(()=>{var e;return((e=B.value)==null?void 0:e.clientWidth)/(s.series.length-1)}),q=()=>{if(w.value.length==0)return;let e=document.createElement("canvas"),l=B.value;e.width=l.clientWidth*2,e.height=l.clientHeight*2;let o=e.getContext("2d");o.lineWidth=1;let i=s.baseValue,a=w.value.map(C=>C.value),h=0,y=a.length;N.value=e.width/(y-1);let d=e.height-h,_=Math.max.apply(Math,a),m=Math.min.apply(Math,a),L=(i-m)/(_-m),f=(d-h)*L;f<0&&(f=0);let b=document.createElement("canvas");b.width=e.width,b.height=e.height;let n=b.getContext("2d");z(o,w.value,_,m,d,h,N.value,f,e,"down"),n==null||n.drawImage(e,0,0),o==null||o.clearRect(0,0,e.width,e.height),o==null||o.beginPath(),f>d?e.height=1:e.height=d-f,e.height<=0&&(e.height=1),z(o,w.value,_,m,d,h,N.value,f,e,"up",!0),n==null||n.drawImage(e,0,0);const r=b.toDataURL("image/png");I.value=r},z=(e,l,o,i,a,h,y,d,_,m,L=!1)=>{e.beginPath();let f=0,b=`rgb(${p.r}, ${p.g}, ${p.b})`;m=="down"&&(b=`rgb(${c.r}, ${c.g}, ${c.b})`),l.forEach((r,C)=>{let A=(r.value-i)/(o-i),Y=(a-h)*A,E=0,W=a-Y;C==0?E=h:E=y*C,e.lineTo(E,W),C>-1&&L&&s.interactive&&V.value.push({y:W/2-4,x:E/2,serie:r})}),e.strokeStyle=b,e.lineWidth=U,e.stroke();let n;if(m=="up"){n=e.createLinearGradient(0,0,0,a);let r=(a-d)/a;r>1?r=1:r<0&&(r=0),n.addColorStop(0,`rgba(${p.r}, ${p.g}, ${p.b}, 0.5)`),n.addColorStop(r,`rgba(${p.r}, ${p.g}, ${p.b}, 0)`),e.lineTo(y*(l.length-1),a-d),e.lineTo(y*(f-l.length),a-d)}else{let r=d/a;r>1?r=1:r<0&&(r=0),n=e.createLinearGradient(0,a,0,0),n.addColorStop(0,`rgba(${c.r}, ${c.g}, ${c.b}, 0.5)`),n.addColorStop(r,`rgba(${c.r}, ${c.g}, ${c.b}, 0)`),e.lineTo(_.width-h,y),e.lineTo(h,y)}m=="down"&&(e.fillStyle="transparent",e.fillRect(0,0,_.width,a-d)),n&&(e.fillStyle=n),e.globalCompositeOperation="destination-over",e.fill(),e.globalCompositeOperation="source-over"};return t.onMounted(()=>{q()}),(e,l)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"simpleBaselineChart",ref:B,class:"simple-baseline-chart"},[s.gridLines&&B.value?(t.openBlock(),t.createElementBlock("div",{key:0,class:"simple-baseline-grid",style:t.normalizeStyle({backgroundSize:`${$.value}px ${$.value}px`})},null,4)):t.createCommentVNode("",!0),I.value?(t.openBlock(),t.createElementBlock("img",{key:1,src:I.value},null,8,O)):t.createCommentVNode("",!0),s.interactive?(t.openBlock(),t.createElementBlock("div",j,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(V.value,(o,i)=>(t.openBlock(),t.createElementBlock("div",{key:i,class:t.normalizeClass(["simple-baseline-serie",{"simple-baseline-serie-start":i==0,"simple-baseline-serie-end":i==V.value.length-1}]),style:t.normalizeStyle({left:`${$.value*i-(i==0?0:$.value/2)}px`,width:`${$.value/(i==0||i==V.value.length-1?2:1)}px`})},[t.createElementVNode("div",{class:"simple-baseline-serie-wrapper",style:t.normalizeStyle({top:`${o.y}px`})},[t.createElementVNode("div",null,[t.createElementVNode("div",null,t.toDisplayString(T(o.serie.timestamp)),1),t.createElementVNode("div",v,t.toDisplayString(o.serie.value),1),R]),t.createElementVNode("span",{style:t.normalizeStyle({backgroundColor:`${o.serie.value>s.baseValue?k(t.unref(p)):k(t.unref(c))}`})},null,4)],4)],6))),128))])):t.createCommentVNode("",!0)],512))}}),J="",G=((u,s)=>{const S=u.__vccOpts||u;for(const[k,T]of s)S[k]=T;return S})(F,[["__scopeId","data-v-94ca05f0"]]);g.VueSBChart=G,Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});
